<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>PBSDex</title>

	<!-- Scoped styles for header/controls/layout -->
	<style>
		:root { --gap: 12px; --radius: 14px; --shadow: 0 6px 20px rgba(0,0,0,.08); }
		body { font-family: system-ui, sans-serif; margin: 0; color: #111; background: #fafafa; }
		header { position: sticky; top: 0; background: #fff; padding: 12px; box-shadow: 0 1px 0 rgba(0,0,0,.08); z-index: 10; }
		.wrap { max-width: 1100px; margin: 0 auto; padding: 12px; }
		.controls { display: grid; grid-template-columns: 1fr 220px 160px; gap: var(--gap); }
		input, select { padding: 10px 12px; border: 1px solid #ddd; border-radius: 10px; background: #fff; }
		footer { padding: 40px 0; color: #666; text-align: center; }
		@media (max-width: 720px) { .controls { grid-template-columns: 1fr 1fr; } }

		/* container for the table */
		#grid {
			display: block;
			overflow: auto;
			max-height: 75vh;
			margin-top: 16px;
		}
	</style>

	<!-- GLOBAL styles for table injected by JS -->
	<style is:global>
		.dex-table {
			width: 100%;
			border-collapse: collapse;
			table-layout: fixed;
			background: #fff;
			border-radius: 14px;
			overflow: hidden;
			box-shadow: 0 6px 20px rgba(0,0,0,.06);

			--col-name: 220px;
			--col-type: 110px;
			--col-ability: 180px;
			--col-hidden: 200px;
			--col-bst: 80px;
			--col-stat: 72px;
		}

		/* cells */
		.dex-table th,
		.dex-table td {
			padding: 10px 8px;              /* ↓ was 10px 12px */
			border-bottom: 1px solid #e5e7eb;
			text-align: left !important;
			font-size: 14px;
			white-space: nowrap;
			overflow: hidden;               /* NEW: clip long text */
			text-overflow: ellipsis;        /* NEW: show … when clipped */
			font-variant-numeric: tabular-nums;
		}

		.dex-table thead th {
			position: sticky;
			top: 0;
			background: #f3f4f6;
			font-weight: 700;
			z-index: 1;
		}

		.dex-table tbody tr:nth-child(odd) { background: #fafafa; }
		.dex-table tbody tr:nth-child(even) { background: #ffffff; }
		.dex-table tbody tr:hover {
			background: #ffeec2;
			transition: background 120ms ease-in-out;
		}

		/* fixed widths */
		.dex-table th:nth-child(1), .dex-table td:nth-child(1) { width: var(--col-name); }
		.dex-table th:nth-child(2), .dex-table td:nth-child(2),
		.dex-table th:nth-child(3), .dex-table td:nth-child(3) { width: var(--col-type); }
		.dex-table th:nth-child(4), .dex-table td:nth-child(4),
		.dex-table th:nth-child(5), .dex-table td:nth-child(5) { width: var(--col-ability); }
		.dex-table th:nth-child(6), .dex-table td:nth-child(6) { width: var(--col-hidden); }
		.dex-table th:nth-child(7), .dex-table td:nth-child(7) { width: var(--col-bst); }
		.dex-table th:nth-child(n+8), .dex-table td:nth-child(n+8) { width: var(--col-stat); }

		/* center Types + BST + stats */
		.dex-table th:nth-child(2), .dex-table td:nth-child(2),
		.dex-table th:nth-child(3), .dex-table td:nth-child(3),
		.dex-table th:nth-child(7), .dex-table td:nth-child(7),
		.dex-table th:nth-child(n+8), .dex-table td:nth-child(n+8) {
			text-align: center;
		}
		/* Make table rows obviously interactive */
		.rowlink { cursor: pointer; }
		.rowlink:focus { outline: 2px solid #93c5fd; outline-offset: -2px; }

		/* Simple detail view */
		.detail {
			background: #fff;
			border-radius: 14px;
			box-shadow: 0 6px 20px rgba(0,0,0,.06);
			padding: 16px;
			min-height: 240px;
		}
		.detail .back {
			appearance: none; border: 1px solid #ddd; background: #f8fafc;
			padding: 6px 10px; border-radius: 8px; cursor: pointer; margin-bottom: 8px;
		}
		.detail-name { margin: 6px 0 12px; }
		.detail-block { margin-top: 12px; }
		.detail-block h2 { font-size: 14px; opacity: .75; margin: 0 0 6px; }

		.kv { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 6px 16px; }
		.kv > div { display: flex; justify-content: space-between; padding: 8px 10px; background: #f7f7f9; border-radius: 8px; }
		.kv span { opacity: .7; }

		.stats { border-collapse: collapse; }
		.stats td { padding: 6px 8px; border-bottom: 1px solid #eee; }
		.stats td.num { text-align: right; font-variant-numeric: tabular-nums; }
		.stats tr.bst td { font-weight: 700; }
	</style>
</head>
<body>
<header>
	<div class="wrap">
		<div class="controls">
			<input id="q" placeholder="Search name, type, ability…" />
			<select id="type">
				<option value="">All types</option>
			</select>
			<select id="sort">
				<option value="name">Sort: Name (A–Z)</option>
				<option value="bst">Sort: Total stats (desc)</option>
			</select>
		</div>
	</div>
</header>

<main class="wrap">
	<div id="count" style="margin:10px 2px; font-size:13px; opacity:.7;"></div>
	<div id="grid"></div>
</main>

<footer>
	Built with Astro on GitHub Pages.
</footer>

<script type="module">
	import '/src/scripts/main.ts';
</script>

</body>
</html>
