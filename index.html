<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PBSDex</title>

    <!-- your styles pasted as-is -->
    <style>
        :root { --gap: 12px; --radius: 14px; --shadow: 0 6px 20px rgba(0,0,0,.08); }
        body { font-family: system-ui, sans-serif; margin: 0; color: #111; background: #fafafa; }
        header { position: sticky; top: 0; background: #fff; padding: 12px; box-shadow: 0 1px 0 rgba(0,0,0,.08); z-index: 10; }
        .wrap { max-width: 1100px; margin: 0 auto; padding: 12px; }
        .controls { display: grid; grid-template-columns: 1fr 220px 160px; gap: var(--gap); }
        input, select { padding: 10px 12px; border: 1px solid #ddd; border-radius: 10px; background: #fff; }
        footer { padding: 40px 0; color: #666; text-align: center; }
        @media (max-width: 720px) { .controls { grid-template-columns: 1fr 1fr; } }
        #grid { display: block; overflow: auto; max-height: 75vh; margin-top: 16px; }
    </style>

    <style>
        .dex-table { width: 100%; border-collapse: collapse; table-layout: fixed; background: #fff; border-radius: 14px; overflow: hidden; box-shadow: 0 6px 20px rgba(0,0,0,.06);
            --col-name: 220px; --col-type: 110px; --col-ability: 180px; --col-hidden: 200px; --col-bst: 80px; --col-stat: 72px; }
        .dex-table th, .dex-table td { padding: 10px 8px; border-bottom: 1px solid #e5e7eb; text-align: left !important; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-variant-numeric: tabular-nums; }
        .dex-table thead th { position: sticky; top: 0; background: #f3f4f6; font-weight: 700; z-index: 1; }
        .dex-table tbody tr:nth-child(odd) { background: #fafafa; }
        .dex-table tbody tr:nth-child(even) { background: #ffffff; }
        .dex-table tbody tr:hover { background: #ffeec2; transition: background 120ms ease-in-out; }
        /* fixed widths (BST moved to last col = 13) */
        .dex-table th:nth-child(1), .dex-table td:nth-child(1) { width: var(--col-name); }
        .dex-table th:nth-child(2), .dex-table td:nth-child(2),
        .dex-table th:nth-child(3), .dex-table td:nth-child(3) { width: var(--col-type); }
        .dex-table th:nth-child(4), .dex-table td:nth-child(4),
        .dex-table th:nth-child(5), .dex-table td:nth-child(5) { width: var(--col-ability); }
        .dex-table th:nth-child(6), .dex-table td:nth-child(6) { width: var(--col-hidden); }
        /* stats now start at col 7 */
        .dex-table th:nth-child(n+7), .dex-table td:nth-child(n+7) { width: var(--col-stat); }
        /* override last col for BST */
        .dex-table th:nth-child(13), .dex-table td:nth-child(13) { width: var(--col-bst); }

        /* center Types + BST + all stats (7..12) */
        .dex-table th:nth-child(2), .dex-table td:nth-child(2),
        .dex-table th:nth-child(3), .dex-table td:nth-child(3),
        .dex-table th:nth-child(7), .dex-table td:nth-child(7),
        .dex-table th:nth-child(8), .dex-table td:nth-child(8),
        .dex-table th:nth-child(9), .dex-table td:nth-child(9),
        .dex-table th:nth-child(10), .dex-table td:nth-child(10),
        .dex-table th:nth-child(11), .dex-table td:nth-child(11),
        .dex-table th:nth-child(12), .dex-table td:nth-child(12),
        .dex-table th:nth-child(13), .dex-table td:nth-child(13) {
            text-align: center;
        }

        /* optional: links inside table + lists in ability page */
        ul.list { margin: 0; padding-left: 18px; }
        ul.list li { margin: 4px 0; }

        .rowlink { cursor: pointer; }
        .rowlink:focus { outline: 2px solid #93c5fd; outline-offset: -2px; }
        .detail { background: #fff; border-radius: 14px; box-shadow: 0 6px 20px rgba(0,0,0,.06); padding: 16px; min-height: 240px; }
        .detail .back { appearance: none; border: 1px solid #ddd; background: #f8fafc; padding: 6px 10px; border-radius: 8px; cursor: pointer; margin-bottom: 8px; }
        .detail-name { margin: 6px 0 12px; }
        .detail-block { margin-top: 12px; }
        .detail-block h2 { font-size: 14px; opacity: .75; margin: 0 0 6px; }
        .kv { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 6px 16px; }
        .kv > div { display: flex; justify-content: space-between; padding: 8px 10px; background: #f7f7f9; border-radius: 8px; }
        .kv span { opacity: .7; }
        .stats { border-collapse: collapse; }
        .stats td { padding: 6px 8px; border-bottom: 1px solid #eee; }
        .stats td.num { text-align: right; font-variant-numeric: tabular-nums; }
        .stats tr.bst td { font-weight: 700; }
        /* === stat bars === */
        .stats { width: 100%; border-collapse: collapse; }
        .stats td { padding: 6px 8px; border-bottom: 1px solid #eee; vertical-align: middle; }
        .stats td.label { width: 64px; white-space: nowrap; }
        .stats td.num { width: 48px; text-align: right; font-variant-numeric: tabular-nums; font-weight: 700; }
        .stats td.bar { width: 260px; }
        .kv strong em { font-style: italic; opacity: .9; }


        .statbar {
            position: relative;
            height: 12px;
            background: #f2f2f5;
            border-radius: 6px;
            box-shadow: inset 0 1px 2px rgba(0,0,0,.15);
            overflow: hidden;
        }
        .statbar::after {
            content: "";
            position: absolute;
            inset: 0 auto 0 0;
            width: var(--w, 0%);
            /* red→gold range using hue 10..50 */
            background: linear-gradient(to bottom,
            hsl(var(--h,40) 95% 55%),
            hsl(var(--h,40) 85% 45%)
            );
            border-radius: 6px;
            box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);
        }

        /* controls: now 4 columns */
        .controls { display: grid; grid-template-columns: 1fr 220px 160px auto; gap: var(--gap); align-items: center; }

        .theme-btn {
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #fff;
            cursor: pointer;
        }

        /* ===========================
   Dark theme overrides
   =========================== */
        [data-theme="dark"] body { color: #e8ecf1; background: #0f1115; }
        [data-theme="dark"] header { background: #161a22; box-shadow: 0 1px 0 rgba(0,0,0,.6); }
        [data-theme="dark"] .wrap { color: inherit; }

        [data-theme="dark"] input,
        [data-theme="dark"] select,
        [data-theme="dark"] .theme-btn {
            background: #0f1115;
            color: #e8ecf1;
            border: 1px solid #2b3040;
        }
        [data-theme="dark"] .theme-btn { background: #161a22; }

        [data-theme="dark"] .dex-table {
            background: #161a22;
            box-shadow: 0 6px 20px rgba(0,0,0,.35);
        }
        [data-theme="dark"] .dex-table thead th { background: #1b2030; color: #e8ecf1; }
        [data-theme="dark"] .dex-table th,
        [data-theme="dark"] .dex-table td { border-bottom: 1px solid #2b3040; color: #e8ecf1; }

        [data-theme="dark"] .dex-table tbody tr:nth-child(odd) { background: #141824; }
        [data-theme="dark"] .dex-table tbody tr:nth-child(even) { background: #111521; }
        [data-theme="dark"] .dex-table tbody tr:hover { background: #24314a; }

        [data-theme="dark"] .detail { background: #161a22; box-shadow: 0 6px 20px rgba(0,0,0,.35); }
        [data-theme="dark"] .detail .back { background: #121723; border-color: #2b3040; color: #e8ecf1; }
        [data-theme="dark"] .kv > div { background: #121723; }

        [data-theme="dark"] .statbar { background: #20263a; }
        [data-theme="dark"] .statbar::after { box-shadow: inset 0 -1px 0 rgba(0,0,0,.45); }

        [data-theme="dark"] footer { color: #9aa3b2; }

        .dex-table a.abil-link { text-decoration: underline; } /* readable in both themes */

        /* Ability links in the Pokémon detail page — look like plain text */
        .detail a.abil-link,
        .detail a.abil-link:visited {
            color: inherit;          /* no blue/purple */
            text-decoration: none;   /* no underline */
        }

        /* Optional: a tiny cue on hover, remove if you want zero decoration */
        .detail a.abil-link:hover {
            text-decoration: underline;
        }

        /* Optional: keyboard focus ring for accessibility */
        .detail a.abil-link:focus {
            outline: 2px solid #93c5fd;
            outline-offset: 2px;
            border-radius: 2px;
        }
        [data-theme="dark"] .detail a.abil-link:focus { outline-color: #60a5fa; }

        /* Ability links in tables — plain text look */
        .dex-table a.abil-link,
        .dex-table a.abil-link:visited {
            color: inherit;          /* no blue/purple */
            text-decoration: none;   /* no underline */
        }

        /* keep it plain even on hover */
        .dex-table a.abil-link:hover {
            text-decoration: none;
        }

        /* accessibility: keep a clear keyboard focus */
        .dex-table a.abil-link:focus {
            outline: 2px solid #93c5fd;
            outline-offset: 2px;
            border-radius: 2px;
        }
        [data-theme="dark"] .dex-table a.abil-link:focus { outline-color: #60a5fa; }

        /* Light theme — dynamic hue (red → cyan) with a glossy vertical gradient */
        .statbar::after {
            background: linear-gradient(
                    to bottom,
                    hsl(var(--h) 95% 60%),
                    hsl(var(--h) 90% 50%)
            );
        }

        /* Dark theme — same hue mapping, just deeper lightness for contrast */
        [data-theme="dark"] .statbar::after {
            background: linear-gradient(
                    to bottom,
                    hsl(var(--h) 80% 55%),
                    hsl(var(--h) 75% 45%)
            );
        }

        /* Optional: a subtle outer glow for very high stats (looks nice in dark) */
        [data-theme="dark"] .statbar::after {
            box-shadow:
                    inset 0 -1px 0 rgba(0,0,0,.45),
                    0 0 6px hsl(var(--h) 70% 55% / .25);
        }

        /* Floating tooltip (used for ability descriptions) */
        #tooltip {
            position: fixed;                   /* escapes any parent overflow */
            z-index: 2147483647;               /* always on top */
            max-width: 36ch;
            padding: 8px 10px;
            border-radius: 8px;
            font-size: 12.5px;                 /* smaller text */
            font-weight: 400;                  /* light style */
            line-height: 1.25;
            pointer-events: none;              /* don't steal hover/focus */
            opacity: 0;
            transform: translateY(4px);
            transition: opacity 100ms ease, transform 100ms ease;
            background: #fff;                  /* white in light mode */
            color: #111;
            border: 1px solid rgba(0,0,0,.12);
            box-shadow: 0 10px 28px rgba(0,0,0,.18);
        }
        #tooltip.show { opacity: 1; transform: translateY(0); }
        #tooltip::after {                      /* small arrow */
            content: "";
            position: absolute;
            width: 10px; height: 10px;
            left: 16px; top: -5px;
            transform: rotate(45deg);
            background: #fff;
            border-left: 1px solid rgba(0,0,0,.12);
            border-top: 1px solid rgba(0,0,0,.12);
        }

        [data-theme="dark"] #tooltip {
            background: #0f1115;
            color: #e8ecf1;
            border: 1px solid #2b3040;
            box-shadow: 0 12px 32px rgba(0,0,0,.55);
        }
        [data-theme="dark"] #tooltip::after {
            background: #0f1115;
            border-left: 1px solid #2b3040;
            border-top: 1px solid #2b3040;
        }

        .detail a.abil-link,
        .detail a.abil-link:visited,
        .dex-table a.abil-link,
        .dex-table a.abil-link:visited { color: inherit; text-decoration: none; }
        .dex-table a.abil-link:hover,
        .detail  a.abil-link:hover { text-decoration: none; }
        /* keep an accessible focus ring */
        .dex-table a.abil-link:focus,
        .detail  a.abil-link:focus { outline: 2px solid #93c5fd; outline-offset: 2px; border-radius: 2px; }
        [data-theme="dark"] .dex-table a.abil-link:focus,
        [data-theme="dark"] .detail  a.abil-link:focus { outline-color: #60a5fa; }

    </style>
</head>
<body>
<header>
    <div class="wrap">
        <div class="controls">
            <input id="q" placeholder="Search name, type, ability…" />
            <select id="type"><option value="">All types</option></select>
            <select id="sort">
                <option value="name">Sort: Name (A–Z)</option>
                <option value="bst">Sort: Total stats (desc)</option>
            </select>
            <button id="theme-toggle" class="theme-btn" title="Toggle dark mode">🌙</button>
        </div>
    </div>
</header>

<main class="wrap">
    <div id="count" style="margin:10px 2px; font-size:13px; opacity:.7;"></div>
    <div id="grid"></div>
</main>

<footer>Built with Vite on GitHub Pages.</footer>

<!-- Dev uses /src/...; build rewrites to hashed .js under /PBSDex/ -->
<script type="module" src="/src/scripts/main.ts"></script>
</body>
</html>
